<!--Resources Nested Tabs-->
<div class="sm:rounded-lg overflow-auto" style="background-color: #fff;">
    <mat-tab-group mat-align-tabs="start" (selectedIndexChange)="getRelativeTabJobs($event)">
        <!-- Custom Harvesting-->
        <mat-tab label="Custom Harvesting">
            <div class="flex justify-end py-4">
                

                <!-- 
                <button class="ml-2" mat-flat-button [color]="'warn'">
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:filter'"></mat-icon>
                    <span class="ml-1 sm:ml-2">Filter</span>
                </button> -->
            </div>
            <div class="bg-gray justify-center w-11/12 mx-auto my-8 shadow rounded-lg" style="background-color:#EFEEFF; border:1px solid #DFE4EA">
                <div class="flex flex-col justify-center items-center">
                    <div class="flex flex-row gap-x-3 pt-2">
                        <div class="w-inherit flex flex-col filters-job-result">
                            <form [formGroup]="jobsFiltersForm" (ngSubmit)="applyFilters()"
                                class="flex flex-row flex-auto gap-x-8">
                                <!-- MAT AUTOCOMPLETE -->
                                <mat-form-field class="w-72" appearance="outline" fxFlex>
                                    <mat-label>Farm Name</mat-label>
                                    <input (click)="getDropdownFarms()" [matAutocomplete]="farms"
                                        (keyup)="farm_search$.next($event.target.value)" matInput formControlName="farm_id"
                                        name="name" placeholder="Farm Name" />
                                </mat-form-field>
                                <mat-autocomplete #farms="matAutocomplete" [displayWith]="displayFarmForAutoComplete">
                                    <div *ngIf="allFarms | withLoading | async as allFarms">
                                        <ng-template [ngIf]="allFarms.value">
                                            <mat-option *ngFor="let farm of allFarms.value.customer_farms" [value]="farm">
                                                {{ farm.name }}
                                            </mat-option>
                                        </ng-template>
                                        <ng-template [ngIf]="allFarms?.loading">
                                            <mat-option>
                                                <div style="display: flex;
                                                            justify-content: center;
                                                            text-align: center;">
                                                    <mat-spinner class="text-primary" diameter="25"></mat-spinner>
                                                </div>
                                            </mat-option>
                                        </ng-template>
        
                                        <ng-template [ngIf]="allFarms?.value?.customer_farms?.length == 0">
                                            <mat-option disabled> No Farm(s) found </mat-option>
                                        </ng-template>
                                    </div>
                                </mat-autocomplete>
                                <!-- MAT AUTOCOMPLETE -->
        
        
        
                                <!-- Crop AUTOCOMPLETE -->
        
                <mat-form-field class="w-72" appearance="outline" fxFlex>
                    <mat-label>Crop Name</mat-label>
                    <input (ngModelChange)="formValidation($event)" (click)="getDropdownCrops()" [matAutocomplete]="crops"
                        (keyup)="crop_search$.next($event.target.value)" matInput formControlName="crop_id" name="name"
                        placeholder="Crop Name" />
                </mat-form-field>
        
                <mat-autocomplete #crops="matAutocomplete" [displayWith]="displayCropForAutoComplete">
                    <div *ngIf="allCrops | withLoading | async as allCrops">
                        <ng-template [ngIf]="allCrops.value">
                            <mat-option *ngFor="let crop of allCrops.value.crops" [value]="crop">
                                {{ crop.name }}
                            </mat-option>
                        </ng-template>
                        <ng-template [ngIf]="allCrops?.loading">
                            <mat-option>
                                <div style="display: flex;
                                            justify-content: center;
                                            text-align: center;">
                                    <mat-spinner class="text-primary" diameter="25"></mat-spinner>
                                </div>
                            </mat-option>
                        </ng-template>
        
                        <ng-template [ngIf]="allCrops?.value?.crops?.length == 0">
                            <mat-option disabled> No Crop(s) found </mat-option>
                        </ng-template>
                    </div>
                </mat-autocomplete>
                <!-- Crop AUTOCOMPLETE -->
        
        
                                <mat-form-field class="w-72" appearance="outline">
                                    <mat-label>Destinations</mat-label>
                                    <input matInput formControlName="destinations" />
                                </mat-form-field>
        
                            </form>
                        </div>
                        <div class="flex flex-row justify-evenly items-start gap-x-3 pt-2">
                            <div class="w-inherit flex justify-center items-center mt-1 mb-1">
                                <button (click)="applyFilters(); filtersDrawer.close()" class="" mat-flat-button
                                    [color]="'primary'">
                                    <span class="">Apply filters</span>
                                </button>
                            </div>
                            <div class="w-inherit flex justify-center items-center mt-1 mb-1">
                                <button (click)="removeFilters(); filtersDrawer.close()"
            
                                    [disabled]="!jobsFiltersForm.value.farm_id && !jobsFiltersForm.value.created_at && !jobsFiltersForm.value.crop_id && !jobsFiltersForm.value.destinations"
                                    class="bg-transparent hover:bg-red-500 text-red-500 font-semibold hover:text-white py-2 px-2 border border-red-500 hover:border-transparent rounded inline-flex items-center">
                                    <mat-icon class="m-0 icon-size-4" color="warn" [svgIcon]="'heroicons_outline:x'"></mat-icon>
                                    <span>Remove filters</span>
                                </button>
                            </div>
                            <div class="w-inherit flex justify-center items-center mt-1 mb-1">

                            <button mat-flat-button [color]="'primary'">
                                <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                                <span class="lg:ml-2">Ready Invoice</span>
                            </button>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            <div class="w-11/12 mx-auto">
                <mat-accordion>
                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
                        class="toggling-info-job-result mb-4 bg-gray-100  py-1">
                        <mat-expansion-panel-header>
                            <mat-panel-title class="text-lg font-extrabold text-gray-500">
                                Details
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="customHarvestingJobs$ | async as harvestingJobs"
                            class="grid grid-cols-3 table-auto py-5 justify-between gap-x-8 gap-y-2 sm:p-8 p-3 m-auto gray-custom-bg">
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Total Net Pounds</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_net_pounds ? harvestingJobs.details[0]?.total_net_pounds : "N/A" }}</mat-label>
                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Total Tons</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_net_pounds? harvestingJobs.details[0]?.total_net_pounds/2000 : "N/A"}}</mat-label>

                            </div>

                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Tons per Acre</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_net_pounds/harvestingJobs.details[0]?.total_acres? harvestingJobs.details[0]?.total_net_pounds/harvestingJobs.details[0]?.total_acres : "N/A"}}</mat-label>
                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Total Bushels</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_net_bushels? harvestingJobs.details[0]?.total_net_bushels : "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Bushels per Acre</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_net_bushels/harvestingJobs.details[0]?.total_acres? harvestingJobs.details[0]?.total_net_bushels/harvestingJobs.details[0]?.total_acres : "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Total Hundred Weight</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_net_pounds? harvestingJobs.details[0]?.total_net_pounds/100: "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">DHT Total Loaded Miles</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_loaded_miles? harvestingJobs.details[0]?.total_loaded_miles: "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">DHT Average Miles</mat-label>
                                <mat-label
                                    class="text-right">{{harvestingJobs.details[0]?.total_loaded_miles/harvestingJobs.details[0]?.total_tickets? harvestingJobs.details[0]?.total_loaded_miles/harvestingJobs.details[0]?.total_tickets: "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Total Loads</mat-label>
                                <mat-label class="text-right">{{harvestingJobs.total_loads? harvestingJobs.total_loads: "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">DHT Tickets</mat-label>
                                <mat-label class="text-right">{{harvestingJobs.details[0]?.total_tickets ? harvestingJobs.details[0]?.total_tickets : "N/A"}}</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Farmer Tickets</mat-label>
                                <mat-label class="text-right">1234</mat-label>

                            </div>
                            <div class="flex flex-col justify-center py-1 items-start">
                                <mat-label class="text-lg text-gray-500 font-bold">Company</mat-label>
                                <mat-label class="text-right">{{harvestingJobs.details[0]?.company_name ? harvestingJobs.details[0]?.company_name  : "N/A"}}</mat-label>

                            </div>



                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
               
            
            <div class="mt-4 px-4 py-5 sm:p-0 w-11/12 mx-auto rounded-xl shadow" *ngIf="customHarvestingJobs$ | async as harvestingJobs">
                <!-- Main -->
                <div class="flex flex-auto overflow-hidden">
                    <!-- Products list -->
                    <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                        <ng-container>
                            <ng-container>
                                <div class="grid" style="background-color: #fff;">
                                    <!-- Header -->
                                    <div class="job-result-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                        matSort matSortDisableClear>
                                        <div class="sm:block">
                                            Field
                                        </div>
                                        <div class="sm:block pl-2">
                                            Load Date
                                        </div>
                                        <div class="sm:block pl-2">
                                            Destination
                                        </div>
                                        <div class="hidden lg:block">
                                            Tickets
                                        </div>
                                        <div class="hidden sm:block">
                                            Net Pounds</div>

                                        <div class="hidden sm:block">
                                            Net Bushels
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Load Miles
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Status
                                        </div>
                                    </div>
                                    <!-- Rows -->
                                    <ng-container>
                                        <ng-container>
                                            <div *ngIf="customHarvestingJobs$ | async as harvestingJobs">
                                                <div *ngIf=" harvestingJobs.harvestingJobs?.length > 0; else noJobs ">
                                                    <div *ngFor="let harvestingJob of harvestingJobs.harvestingJobs"
                                                        class="job-result-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                                        <div class="truncate">
                                                            {{harvestingJob.field_name}}
                                                        </div>

                                                        <!-- Harvest Year -->
                                                        <div class="sm:block">
                                                            {{harvestingJob.load_date | date: "dd-MM-YYYY" }}
                                                        </div>

                                                        <!-- Email -->
                                                        <div class="sm:block items-center">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.destination}}
                                                            </div>
                                                        </div>

                                                        <!-- Contact -->
                                                        <div class="hidden sm:block items-center">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.id}}
                                                            </div>
                                                        </div>
                                                        <!-- Active -->
                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.net_pounds}}
                                                            </div>
                                                        </div>

                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2">{{harvestingJob.net_bushel}}
                                                            </div>
                                                        </div>
                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.load_miles}}
                                                            </div>
                                                        </div>
                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2 capitalize text-center text-white m-4 rounded-full py-2" style="background: #4ADE80;">
                                                                {{harvestingJob.status}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <!-- <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent" [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length" [pageIndex]="pagination.page" [pageSize]="pagination.size"
                                    [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator> -->
                            </ng-container>
                        </ng-container>
                        <ng-template #noJobs>
                            <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">There
                                are no Job Results!</div>
                        </ng-template>

                    </div>

                </div>
            </div>


        </mat-tab>

        <!--Commercial Trucking -->
        <mat-tab label="Commercial Trucking">
            <div class="mt-4 px-4 py-5 sm:p-0 w-11/12 mx-auto rounded-xl shadow">
                <!-- Main -->
                <div class="flex flex-auto overflow-hidden">
                    <!-- Products list -->
                    <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                        <ng-container>
                            <ng-container>
                                <div class="grid" style="background-color: #fff;">
                                    <!-- Header -->
                                    <div class="job-result-custom-trucking-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                        matSort matSortDisableClear>
                                        <div class="sm:block">
                                            Load Date
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Dispatcher
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Driver
                                        </div>
                                        <div class="sm:block">
                                            Ticket Number
                                        </div>
                                        <div class="hidden sm:block">
                                            Cargo</div>

                                        <div class="hidden sm:block">
                                            City
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            State
                                        </div>
                                        <div class="sm:block pl-2">
                                            Status
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Invoice
                                        </div>
                                    </div>
                                    <!-- Rows -->
                                    <ng-container>
                                        <ng-container>
                                            <div *ngIf="commercialTruckingJobs$ | async as ctJobs">
                                                <div *ngFor="let truckingJob of ctJobs.truckingJobs"
                                                    class="job-result-custom-trucking-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                                    <div class="truncate">
                                                        {{truckingJob.load_date | date: "dd-MM-YYYY"}}
                                                    </div>

                                                    <!-- Harvest Year -->
                                                    <div class="hidden sm:block">
                                                        {{truckingJob.disp_first_name}} {{truckingJob.disp_last_name}}
                                                    </div>

                                                    <!-- Email -->
                                                    <div class="hidden sm:block items-center">
                                                        <div class="min-w-4 ml-2">
                                                            {{truckingJob.dr_first_name}} {{truckingJob.dr_last_name}}

                                                        </div>
                                                    </div>

                                                    <!-- Contact -->
                                                    <div class="sm:block items-center">
                                                        <div class="min-w-4 ml-2">
                                                            {{truckingJob.id}}

                                                        </div>
                                                    </div>
                                                    <!-- Active -->
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{truckingJob.cargo}}
                                                        </div>
                                                    </div>

                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{truckingJob.dest_city}}

                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">{{truckingJob.destination_state }}</div>
                                                    </div>
                                                    <div class="lg:block">
                                                        <div class="min-w-4 ml-2 capitalize text-center text-white m-4 rounded-full py-2" style="background: #4ADE80;">
                                                            {{truckingJob.status }}

                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">"Invoice"
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <!-- <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent" [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length" [pageIndex]="pagination.page" [pageSize]="pagination.size"
                                    [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator> -->
                            </ng-container>
                        </ng-container>
                        <ng-template #noProducts>
                            <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">There
                                are no products!</div>
                        </ng-template>

                    </div>

                </div>
            </div>
        </mat-tab>


        <!--Custom Farming-->
        <mat-tab label="Custom Farming">
            <div class="mt-4 px-4 border-t border-gray-100 py-5 sm:p-0">
                <!-- Main -->
                <div class="flex flex-auto overflow-hidden  w-11/12 mx-auto rounded-xl shadow">
                    <!-- Products list -->
                    <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                        <ng-container>
                            <ng-container>
                                <div class="grid" style="background-color: #fff;">
                                    <!-- Header -->
                                    <div class="job-result-custom-farming-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                        matSort matSortDisableClear>
                                        <div class="sm:block">
                                            Date
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Service
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Farm
                                        </div>
                                        <div class="hidden lg:block">
                                            Field
                                        </div>
                                        <div class="hidden sm:block">
                                            Acres
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            GPS Acres
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Start Time
                                        </div>
                                        <div class="hidden lg:block">
                                            End Time
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Tractor Engine Hours
                                        </div>
                                        <div class="sm:block pl-2">
                                            Status
                                        </div>
                                        <div class="lg:block">
                                            Invoice
                                        </div>
                                    </div>
                                    <!-- Rows -->
                                    <ng-container>
                                        <ng-container>
                                            <div *ngIf="customFarmingJobs$ | async as farmingJobs">
                                                <div *ngFor="let farmingJob of farmingJobs.farmingJobs"
                                                    class="job-result-custom-farming-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                                    <div class="truncate">
                                                        {{farmingJob.date | date: "dd-MM-YYYY"}}
                                                    </div>

                                                    <!-- Harvest Year -->
                                                    <div class="hidden sm:block">
                                                        {{farmingJob.service}}
                                                    </div>

                                                    <!-- Email -->
                                                    <div class="hidden sm:block items-center">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.farm_name}}

                                                        </div>
                                                    </div>

                                                    <!-- Contact -->
                                                    <div class="hidden sm:block items-center">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.field_name}}
                                                        </div>
                                                    </div>
                                                    <!-- Active -->
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.acres}}
                                                        </div>
                                                    </div>

                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.gps_acres}}
                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2 capitalize">
                                                            {{farmingJob.start_time | date: "dd-MM-YYYY, h:mm a"}}
                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.end_time}}

                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">{{farmingJob.engine_hours}}</div>
                                                    </div>
                                                    <div class="lg:block">
                                                        <div class="min-w-4 ml-2 capitalize text-center text-white m-4 rounded-full py-2" style="background: #4ADE80;">
                                                            {{farmingJob.status}}

                                                        </div>
                                                    </div>
                                                    <div class="lg:block">
                                                        <div class="min-w-4 ml-2">"Invoice"
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <!-- <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent" [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length" [pageIndex]="pagination.page" [pageSize]="pagination.size"
                                    [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator> -->
                            </ng-container>
                        </ng-container>
                        <ng-template #noProducts>
                            <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">There
                                are no products!</div>
                        </ng-template>

                    </div>

                </div>
            </div>
        </mat-tab>

        <!-- Summary -->
        <mat-tab label="Summary">
            <div>
                <header class="mt-4 ml-2  text-2xl font-extrabold tracking-tight text-center"> Combine Summary Table
                </header>
            </div>

            <div>
                <header class="mt-4 ml-2  text-2xl font-extrabold tracking-tight"> Custom Harvesting </header>
            </div>
            <div class="mt-4 px-4 py-5 sm:p-0 w-11/12 mx-auto rounded-xl shadow" *ngIf="customHarvestingJobs$ | async as harvestingJobs">
                <!-- Main -->
                <div class="flex flex-auto overflow-hidden">
                    <!-- Products list -->
                    <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                        <ng-container>
                            <ng-container>
                                <div class="grid" style="background-color: #fff;">
                                    <!-- Header -->
                                    <div class="job-result-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                        matSort matSortDisableClear>
                                        <div class="sm:block">
                                            Field
                                        </div>
                                        <div class="sm:block pl-2">
                                            Load Date
                                        </div>
                                        <div class="sm:block pl-2">
                                            Destination
                                        </div>
                                        <div class="hidden lg:block">
                                            Tickets
                                        </div>
                                        <div class="hidden sm:block">
                                            Net Pounds</div>

                                        <div class="hidden sm:block">
                                            Net Bushels
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Load Miles
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Status
                                        </div>
                                    </div>
                                    <!-- Rows -->
                                    <ng-container>
                                        <ng-container>
                                            <div *ngIf="customHarvestingJobs$ | async as harvestingJobs">
                                                <div *ngIf=" harvestingJobs.harvestingJobs?.length > 0; else noJobs ">
                                                    <div *ngFor="let harvestingJob of harvestingJobs.harvestingJobs"
                                                        class="job-result-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                                        <div class="truncate">
                                                            {{harvestingJob.field_name}}
                                                        </div>

                                                        <!-- Harvest Year -->
                                                        <div class="sm:block">
                                                            {{harvestingJob.load_date | date: "dd-MM-YYYY" }}
                                                        </div>

                                                        <!-- Email -->
                                                        <div class="sm:block items-center">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.destination}}
                                                            </div>
                                                        </div>

                                                        <!-- Contact -->
                                                        <div class="hidden sm:block items-center">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.id}}
                                                            </div>
                                                        </div>
                                                        <!-- Active -->
                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.net_pounds}}
                                                            </div>
                                                        </div>

                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2">{{harvestingJob.net_bushel}}
                                                            </div>
                                                        </div>
                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2">
                                                                {{harvestingJob.load_miles}}
                                                            </div>
                                                        </div>
                                                        <div class="hidden lg:block">
                                                            <div class="min-w-4 ml-2 capitalize text-center text-white m-4 rounded-full py-2" style="background: #4ADE80;">
                                                                {{harvestingJob.status}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <!-- <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent" [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length" [pageIndex]="pagination.page" [pageSize]="pagination.size"
                                    [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator> -->
                            </ng-container>
                        </ng-container>
                        <ng-template #noProducts>
                            <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">There
                                are no products!</div>
                        </ng-template>

                    </div>

                </div>
            </div>


            <div>
                <header class="mt-4 ml-2  text-2xl font-extrabold tracking-tight"> Commercial Trucking </header>
            </div>
            <div class="flex flex-auto overflow-hidden w-11/12 mx-auto rounded shadow">
                <!-- Products list -->
                <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                    <ng-container>
                        <ng-container>
                            <div class="grid" style="background-color: #fff;">
                                <!-- Header -->
                                <div class="job-result-custom-trucking-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                    matSort matSortDisableClear>
                                    <div class="sm:block">
                                        Load Date
                                    </div>
                                    <div class="hidden sm:block pl-2">
                                        Dispatcher
                                    </div>
                                    <div class="hidden sm:block pl-2">
                                        Driver
                                    </div>
                                    <div class="sm:block">
                                        Ticket Number
                                    </div>
                                    <div class="hidden sm:block">
                                        Cargo</div>

                                    <div class="hidden sm:block">
                                        City
                                    </div>
                                    <div class="hidden sm:block pl-2">
                                        State
                                    </div>
                                    <div class="sm:block pl-2">
                                        Status
                                    </div>
                                    <div class="hidden sm:block pl-2">
                                        Invoice
                                    </div>
                                </div>
                                <!-- Rows -->
                                <ng-container>
                                    <ng-container>
                                        <div *ngIf="commercialTruckingJobs$ | async as ctJobs">
                                            <div *ngFor="let truckingJob of ctJobs.truckingJobs"
                                                class="job-result-custom-trucking-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                                <div class="truncate">
                                                    {{truckingJob.load_date | date: "dd-MM-YYYY"}}
                                                </div>

                                                <!-- Harvest Year -->
                                                <div class="hidden sm:block">
                                                    {{truckingJob.disp_first_name}} {{truckingJob.disp_last_name}}
                                                </div>

                                                <!-- Email -->
                                                <div class="hidden sm:block items-center">
                                                    <div class="min-w-4 ml-2">
                                                        {{truckingJob.dr_first_name}} {{truckingJob.dr_last_name}}

                                                    </div>
                                                </div>

                                                <!-- Contact -->
                                                <div class="sm:block items-center">
                                                    <div class="min-w-4 ml-2">
                                                        {{truckingJob.id}}

                                                    </div>
                                                </div>
                                                <!-- Active -->
                                                <div class="hidden lg:block">
                                                    <div class="min-w-4 ml-2">
                                                        {{truckingJob.cargo}}
                                                    </div>
                                                </div>

                                                <div class="hidden lg:block">
                                                    <div class="min-w-4 ml-2">
                                                        {{truckingJob.dest_city}}

                                                    </div>
                                                </div>
                                                <div class="hidden lg:block">
                                                    <div class="min-w-4 ml-2">{{truckingJob.destination_state }}</div>
                                                </div>
                                                <div class="lg:block">
                                                    <div class="min-w-4 ml-2 capitalize text-center text-white m-4 rounded-full py-2" style="background: #4ADE80;">
                                                        {{truckingJob.status }}

                                                    </div>
                                                </div>
                                                <div class="hidden lg:block">
                                                    <div class="min-w-4 ml-2">"Invoice"
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                            <!-- <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent" [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length" [pageIndex]="pagination.page" [pageSize]="pagination.size"
                                [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator> -->
                        </ng-container>
                    </ng-container>
                    <ng-template #noProducts>
                        <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">There are no
                            products!</div>
                    </ng-template>

                </div>

            </div>

            <div>
                <header class="mt-4 ml-2  text-2xl font-extrabold tracking-tight"> Custom Farming </header>
            </div>

            <div class="mt-4 px-4 py-5 sm:p-0 w-11/12 mx-auto rounded-xl shadow">
                <div class="flex flex-auto overflow-hidden">
                    <!-- Products list -->
                    <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                        <ng-container>
                            <ng-container>
                                <div class="grid" style="background-color: #fff;">
                                    <!-- Header -->
                                    <div class="job-result-custom-farming-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                        matSort matSortDisableClear>
                                        <div class="sm:block">
                                            Date
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Service
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Farm
                                        </div>
                                        <div class="hidden lg:block">
                                            Field
                                        </div>
                                        <div class="hidden sm:block">
                                            Acres
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            GPS Acres
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Start Time
                                        </div>
                                        <div class="hidden lg:block">
                                            End Time
                                        </div>
                                        <div class="hidden sm:block pl-2">
                                            Tractor Engine Hours
                                        </div>
                                        <div class="sm:block pl-2">
                                            Status
                                        </div>
                                        <div class="lg:block">
                                            Invoice
                                        </div>
                                    </div>
                                    <!-- Rows -->
                                    <ng-container>
                                        <ng-container>
                                            <div *ngIf="customFarmingJobs$ | async as farmingJobs">
                                                <div *ngFor="let farmingJob of farmingJobs.farmingJobs"
                                                    class="job-result-custom-farming-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                                    <div class="truncate">
                                                        {{farmingJob.date | date: "dd-MM-YYYY"}}
                                                    </div>

                                                    <!-- Harvest Year -->
                                                    <div class="hidden sm:block">
                                                        {{farmingJob.service}}
                                                    </div>

                                                    <!-- Email -->
                                                    <div class="hidden sm:block items-center">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.farm_name}}

                                                        </div>
                                                    </div>

                                                    <!-- Contact -->
                                                    <div class="hidden sm:block items-center">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.field_name}}
                                                        </div>
                                                    </div>
                                                    <!-- Active -->
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.acres}}
                                                        </div>
                                                    </div>

                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.gps_acres}}
                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2 capitalize">
                                                            {{farmingJob.start_time}}
                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">
                                                            {{farmingJob.end_time}}

                                                        </div>
                                                    </div>
                                                    <div class="hidden lg:block">
                                                        <div class="min-w-4 ml-2">{{farmingJob.engine_hours}}</div>
                                                    </div>
                                                    <div class="lg:block">
                                                        <div class="min-w-4 ml-2 capitalize text-center text-white m-4 rounded-full py-2" style="background: #4ADE80;">
                                                            {{farmingJob.status}}

                                                        </div>
                                                    </div>
                                                    <div class="lg:block">
                                                        <div class="min-w-4 ml-2">"Invoice"
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <!-- <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent" [ngClass]="{'pointer-events-none': isLoading}" [length]="pagination.length" [pageIndex]="pagination.page" [pageSize]="pagination.size"
                                    [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true"></mat-paginator> -->
                            </ng-container>
                        </ng-container>
                        <ng-template #noProducts>
                            <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">There
                                are no products!</div>
                        </ng-template>

                    </div>

                </div>
            </div>

        </mat-tab>

    </mat-tab-group>
</div>



<fuse-drawer class="w-100 min-w-100 sm:w-100 sm:min-w-100 z-999 bg-green-300" fixed [mode]="'over'"
    [name]="'settingsDrawer'" [position]="'right'" #filtersDrawer>
    <div class="flex flex-col w-100 overflow-auto bg-card">
        <div class="flex flex-row items-center px-6 h-20 min-h-20 text-white bg-primary">
            <mat-icon class="icon-size-7 text-current" [svgIcon]="'heroicons_outline:filter'"></mat-icon>
            <div class="ml-3 text-2xl font-semibold tracking-tight">
                Filters
            </div>
            <button class="ml-auto" mat-icon-button mat-icon-button (click)="filtersDrawer.close()()">
                <mat-icon class="text-current" [svgIcon]="'heroicons_outline:x'"></mat-icon>
            </button>
        </div>
        <div class="flex flex-col justify-center items-center md:h-screen">
            <div class="md:h-5/6 h-160 w-100">
                <div class="w-inherit flex flex-col">
                    <form [formGroup]="jobsFiltersForm" (ngSubmit)="applyFilters()"
                        class="flex flex-col flex-auto p-6 sm:p-8">
                        <!-- MAT AUTOCOMPLETE -->
                        <mat-form-field appearance="outline" fxFlex>
                            <mat-label>Farm Name</mat-label>
                            <input (click)="getDropdownFarms()" [matAutocomplete]="farms"
                                (keyup)="farm_search$.next($event.target.value)" matInput formControlName="farm_id"
                                name="name" placeholder="Farm Name" />
                        </mat-form-field>
                        <mat-autocomplete #farms="matAutocomplete" [displayWith]="displayFarmForAutoComplete">
                            <div *ngIf="allFarms | withLoading | async as allFarms">
                                <ng-template [ngIf]="allFarms.value">
                                    <mat-option *ngFor="let farm of allFarms.value.customer_farms" [value]="farm">
                                        {{ farm.name }}
                                    </mat-option>
                                </ng-template>
                                <ng-template [ngIf]="allFarms?.loading">
                                    <mat-option>
                                        <div style="display: flex;
                                                    justify-content: center;
                                                    text-align: center;">
                                            <mat-spinner class="text-primary" diameter="25"></mat-spinner>
                                        </div>
                                    </mat-option>
                                </ng-template>

                                <ng-template [ngIf]="allFarms?.value?.customer_farms?.length == 0">
                                    <mat-option disabled> No Farm(s) found </mat-option>
                                </ng-template>
                            </div>
                        </mat-autocomplete>
                        <!-- MAT AUTOCOMPLETE -->



                        <!-- Crop AUTOCOMPLETE -->

        <mat-form-field appearance="outline" fxFlex>
            <mat-label>Crop Name</mat-label>
            <input (ngModelChange)="formValidation($event)" (click)="getDropdownCrops()" [matAutocomplete]="crops"
                (keyup)="crop_search$.next($event.target.value)" matInput formControlName="crop_id" name="name"
                placeholder="Crop Name" />
        </mat-form-field>

        <mat-autocomplete #crops="matAutocomplete" [displayWith]="displayCropForAutoComplete">
            <div *ngIf="allCrops | withLoading | async as allCrops">
                <ng-template [ngIf]="allCrops.value">
                    <mat-option *ngFor="let crop of allCrops.value.crops" [value]="crop">
                        {{ crop.name }}
                    </mat-option>
                </ng-template>
                <ng-template [ngIf]="allCrops?.loading">
                    <mat-option>
                        <div style="display: flex;
                                    justify-content: center;
                                    text-align: center;">
                            <mat-spinner class="text-primary" diameter="25"></mat-spinner>
                        </div>
                    </mat-option>
                </ng-template>

                <ng-template [ngIf]="allCrops?.value?.crops?.length == 0">
                    <mat-option disabled> No Crop(s) found </mat-option>
                </ng-template>
            </div>
        </mat-autocomplete>
        <!-- Crop AUTOCOMPLETE -->


                        <mat-form-field appearance="outline">
                            <mat-label>Destinations</mat-label>
                            <input matInput formControlName="destinations" />
                        </mat-form-field>

                    </form>
                </div>
            </div>
            <div class="flex flex-row justify-evenly items-center w-80">
                <div class="w-inherit flex justify-center items-center mt-1 mb-1">
                    <button (click)="applyFilters(); filtersDrawer.close()" class="" mat-flat-button
                        [color]="'primary'">
                        <span class="">Apply filters</span>
                    </button>
                </div>
                <div class="w-inherit flex justify-center items-center mt-1 mb-1">
                    <button (click)="removeFilters(); filtersDrawer.close()"

                        [disabled]="!jobsFiltersForm.value.farm_id && !jobsFiltersForm.value.created_at && !jobsFiltersForm.value.crop_id && !jobsFiltersForm.value.destinations"
                        class="bg-transparent hover:bg-red-500 text-red-500 font-semibold hover:text-white py-2 px-2 border border-red-500 hover:border-transparent rounded inline-flex items-center">
                        <mat-icon class="m-0 icon-size-4" color="warn" [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        <span>Remove filters</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</fuse-drawer>